/** @license smfplayer.js 2013 - imaya / GREE Inc. [ https://github.com/gree/smfplayer.js ] The MIT License */(function() {var h=this;function p(c,f){var d=c.split("."),b=h;d[0]in b||!b.execScript||b.execScript("var "+d[0]);for(var a;d.length&&(a=d.shift());)d.length||void 0===f?b[a]?b=b[a]:b=b[a]={}:b[a]=f}function q(c){var f=r;function d(){}d.prototype=f.prototype;c.l=f.prototype;c.prototype=new d;c.prototype.constructor=c;c.j=function(b,a,c){for(var d=Array(arguments.length-2),l=2;l<arguments.length;l++)d[l-2]=arguments[l];return f.prototype[a].apply(b,d)}};function r(c,f,d){this.a=c;this.time=d}function t(c,f,d,b,a,m){this.a=c;this.time=d;this.c=b;this.f=a;this.b=m}q(t);function x(c,f,d,b){this.a=c;this.time=d;this.data=b}q(x);function y(c,f,d,b){this.a=c;this.time=d;this.data=b}q(y);function z(c,f){f=f||{};this.f=c;this.a=f.index||0;this.length=f.length||c.length-this.a;this.b=this.a;this.g=void 0!==f.padding?f.padding:!0;this.h=void 0!==f.bigEndian?f.bigEndian:!1}function C(c,f){var d=c.c[f];return void 0===d?null:d};function D(c,f){f=f||{};f.padding=!1;f.bigEndian=!0;this.b=c;this.c=0;this.a=new z(c,f);this.i=[];this.h=[]}
D.prototype.f=function(){var c,f;c=this.a;f=c.length+c.b;for(c.c=[];c.a<f;){var d=c,b=d.f,a=d.a;d.c.push({type:String.fromCharCode(b[a++],b[a++],b[a++],b[a++]),size:b=d.h?(b[a++]<<24|b[a++]<<16|b[a++]<<8|b[a++])>>>0:(b[a++]|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0,offset:a});a+=b;d.g&&1===(a-d.b&1)&&a++;d.a=a}c=C(this.a,this.c++);f=this.b;d=c.offset;if(!c||"MThd"!==c.type)throw Error("invalid header signature");d++;d++;this.g=f[d++]<<8|f[d++];c=0;for(f=this.g;c<f;++c)E(this)};
function E(c){function f(){var c=0,d;do d=b[a++],c=c<<7|d&127;while(0!==(d&128));return c}var d=C(c.a,c.c++),b=c.b,a=d.offset,m,k,l,u=-1,v=-1,e,g=0,n;if(!d||"MTrk"!==d.type)throw Error("invalid header signature");for(var d=d.offset+d.size,A=[],B=[];a<d;){m=f();g+=m;n=a;m=b[a++];k=m>>4&15;l=m&15;8>k?(k=u,l=v,m=u<<4|v,a--,n--):(u=k,v=l);var w=[,,,,,,,,"NoteOff","NoteOn","NoteAftertouch","ControlChange","ProgramChange","ChannelAftertouch","PitchBend"];switch(k){case 8:case 9:case 10:case 11:case 13:case 14:e=
new t(w[k],0,g,l,b[a++],b[a++]);break;case 12:e=new t(w[k],0,g,l,b[a++]);break;case 15:switch(l){case 0:e=f();if(247!==b[a+e-1])throw Error("invalid SysEx event");e=new x("SystemExclusive",0,g,b.subarray(a,(a+=e)-1));break;case 7:e=f();e=new x("SystemExclusive(F7)",0,g,b.subarray(a,a+=e));break;case 15:k=b[a++];e=f();switch(k){case 0:e=new y("SequenceNumber",0,g,[b[a++],b[a++]]);break;case 1:e=new y("TextEvent",0,g,[String.fromCharCode.apply(null,b.subarray(a,a+=e))]);break;case 2:e=new y("CopyrightNotice",
0,g,[String.fromCharCode.apply(null,b.subarray(a,a+=e))]);break;case 3:e=new y("SequenceTrackName",0,g,[String.fromCharCode.apply(null,b.subarray(a,a+=e))]);break;case 4:e=new y("InstrumentName",0,g,[String.fromCharCode.apply(null,b.subarray(a,a+=e))]);break;case 5:e=new y("Lyrics",0,g,[String.fromCharCode.apply(null,b.subarray(a,a+=e))]);break;case 6:e=new y("Marker",0,g,[String.fromCharCode.apply(null,b.subarray(a,a+=e))]);break;case 7:e=new y("CuePoint",0,g,[String.fromCharCode.apply(null,b.subarray(a,
a+=e))]);break;case 32:e=new y("MidiChannelPrefix",0,g,[b[a++]]);break;case 47:e=new y("EndOfTrack",0,g,[]);break;case 81:e=new y("SetTempo",0,g,[b[a++]<<16|b[a++]<<8|b[a++]]);break;case 84:e=new y("SmpteOffset",0,g,[b[a++],b[a++],b[a++],b[a++],b[a++]]);break;case 88:e=new y("TimeSignature",0,g,[b[a++],b[a++],b[a++],b[a++]]);break;case 89:e=new y("KeySignature",0,g,[b[a++],b[a++]]);break;case 127:e=new y("SequencerSpecific",0,g,[b.subarray(a,a+=e)]);break;default:e=new y("Unknown",0,g,[k,b.subarray(a,
a+=e)])}break;default:h.console.log("unknown message:",m.toString(16))}break;default:throw Error("invalid status");}k=a-n;n=b.subarray(n,n+k);n[0]=m;e instanceof t&&"NoteOn"===e.a&&0===e.b&&(e.a=w[8],n=new Uint8Array([128|e.c,e.f,e.b]));B.push(n);A.push(e)}c.i.push(A);c.h.push(B)};p("SMF.Parser",D);p("SMF.Parser.prototype.parse",D.prototype.f);}).call(this); //# sourceMappingURL=smf.parser.min.js.map
