(function(){/*
 @logue/smfplayer v0.2.2 | imaya / GREE Inc. / Logue | license: MIT */
'use strict';(function(p,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define("SMF",[],f):"object"===typeof exports?exports.SMF=f():p.SMF=f()})("undefined"!==typeof self?self:this,function(){return function(p){function f(b){if(h[b])return h[b].exports;var a=h[b]={i:b,l:!1,exports:{}};p[b].call(a.exports,a,a.exports,f);a.l=!0;return a.exports}var h={};f.m=p;f.c=h;f.d=function(b,a,n){f.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,
get:n})};f.r=function(b){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})};f.t=function(b,a){a&1&&(b=f(b));if(a&8||a&4&&"object"===typeof b&&b&&b.__esModule)return b;var n=Object.create(null);f.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:b});if(a&2&&"string"!=typeof b)for(var e in b)f.d(n,e,function(d){return b[d]}.bind(null,e));return n};f.n=function(b){var a=b&&b.__esModule?
function(){return b["default"]}:function(){return b};f.d(a,"a",a);return a};f.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};f.p="";return f(f.s=2)}([function(p,f,h){h.d(f,"a",function(){return a});h.d(f,"c",function(){return n});h.d(f,"b",function(){return e});class b{constructor(d,c,e){this.subtype=d;this.deltaTime=c;this.time=e}}class a extends b{constructor(d,c,e,a,b,n){super(d,c,e);this.channel=a;this.parameter1=b;this.parameter2=n}}class n extends b{constructor(d,c,e,a){super(d,
c,e);this.data=a}}class e extends b{constructor(d,c,e,a){super(d,c,e);this.data=a}}},function(p,f,h){h.d(f,"a",function(){return b});class b{constructor(a,e={}){this.input=a;this.ip=e.index||0;this.length=e.length||a.length-this.ip;this.offset=this.ip;this.padding=void 0!==e.padding?e.padding:!0;this.bigEndian=void 0!==e.bigEndian?e.bigEndian:!1}parse(){const a=this.length+this.offset;for(this.chunkList=[];this.ip<a;)this.parseChunk()}parseChunk(){var b=this.input;let e=this.ip;this.chunkList.push(new a(String.fromCharCode(b[e++],
b[e++],b[e++],b[e++]),b=this.bigEndian?(b[e++]<<24|b[e++]<<16|b[e++]<<8|b[e++])>>>0:(b[e++]|b[e++]<<8|b[e++]<<16|b[e++]<<24)>>>0,e));e+=b;this.padding&&1===(e-this.offset&1)&&e++;this.ip=e}getChunk(a){a=this.chunkList[a];return void 0===a?null:a}getNumberOfChunks(){return this.chunkList.length}}class a{constructor(a,e,d){this.type=a;this.size=e;this.offset=d}}},function(p,f,h){h.r(f);h.d(f,"default",function(){return n});var b=h(1),a=h(0);class n{constructor(a,d={}){d.padding=!1;d.bigEndian=!0;this.input=
a;this.ip=d.index||0;this.chunkIndex=0;this.riffParser_=new b.a(a,d);this.timeDivision=this.numberOfTracks=this.formatType=0;this.tracks=[];this.plainTracks=[]}parse(){let a,d;this.riffParser_.parse();this.parseHeaderChunk();a=0;for(d=this.numberOfTracks;a<d;++a)this.parseTrackChunk()}parseHeaderChunk(){const a=this.riffParser_.getChunk(this.chunkIndex++),d=this.input;let c=a.offset;if(!a||"MThd"!==a.type)throw Error("invalid header signature");this.formatType=d[c++]<<8|d[c++];this.numberOfTracks=
d[c++]<<8|d[c++];this.timeDivision=d[c++]<<8|d[c++]}parseTrackChunk(){var b=this.riffParser_.getChunk(this.chunkIndex++);const d=this.input;let c=b.offset,f=0;var k=0;let h=0;var l=0;let n=-1,p=-1,m=l=0;var q=0;let r=k=0,g;const t=()=>{let a=0,b;do b=d[c++],a=a<<7|b&127;while(0!==(b&128));return a};if(!b||"MTrk"!==b.type)throw Error("invalid header signature");f=b.offset+b.size;b=[];const u=[];for(;c<f;){k=t();m+=k;q=c;r=d[c++];h=r>>4&15;l=r&15;8>h?(h=n,l=p,r=n<<4|p,c--,q--):(n=h,p=l);const e=[,,
,,,,,,"NoteOff","NoteOn","NoteAftertouch","ControlChange","ProgramChange","ChannelAftertouch","PitchBend"];switch(h){case 8:case 9:case 10:case 11:case 13:case 14:g=new a.a(e[h],k,m,l,d[c++],d[c++]);break;case 12:g=new a.a(e[h],k,m,l,d[c++]);break;case 15:switch(l){case 0:l=t();if(247!==d[c+l-1])throw Error("invalid SysEx event");g=new a.c("SystemExclusive",k,m,d.subarray(c,(c+=l)-1));break;case 7:l=t();g=new a.c("SystemExclusive(F7)",k,m,d.subarray(c,c+=l));break;case 15:h=d[c++];l=t();switch(h){case 0:g=
new a.b("SequenceNumber",k,m,[d[c++],d[c++]]);break;case 1:g=new a.b("TextEvent",k,m,[String.fromCharCode.apply(null,d.subarray(c,c+=l))]);break;case 2:g=new a.b("CopyrightNotice",k,m,[String.fromCharCode.apply(null,d.subarray(c,c+=l))]);break;case 3:g=new a.b("SequenceTrackName",k,m,[String.fromCharCode.apply(null,d.subarray(c,c+=l))]);break;case 4:g=new a.b("InstrumentName",k,m,[String.fromCharCode.apply(null,d.subarray(c,c+=l))]);break;case 5:g=new a.b("Lyrics",k,m,[String.fromCharCode.apply(null,
d.subarray(c,c+=l))]);break;case 6:g=new a.b("Marker",k,m,[String.fromCharCode.apply(null,d.subarray(c,c+=l))]);break;case 7:g=new a.b("CuePoint",k,m,[String.fromCharCode.apply(null,d.subarray(c,c+=l))]);break;case 32:g=new a.b("MidiChannelPrefix",k,m,[d[c++]]);break;case 47:g=new a.b("EndOfTrack",k,m,[]);break;case 81:g=new a.b("SetTempo",k,m,[d[c++]<<16|d[c++]<<8|d[c++]]);break;case 84:g=new a.b("SmpteOffset",k,m,[d[c++],d[c++],d[c++],d[c++],d[c++]]);break;case 88:g=new a.b("TimeSignature",k,m,
[d[c++],d[c++],d[c++],d[c++]]);break;case 89:g=new a.b("KeySignature",k,m,[d[c++],d[c++]]);break;case 127:g=new a.b("SequencerSpecific",k,m,[d.subarray(c,c+=l)]);break;default:g=new a.b("Unknown",k,m,[h,d.subarray(c,c+=l)])}break;default:console.warn("unknown message:",r.toString(16))}break;default:throw Error("invalid status");}k=c-q;q=d.subarray(q,q+k);q[0]=r;g instanceof a.a&&"NoteOn"===g.subtype&&0===g.parameter2&&(g.subtype=e[8],q=new Uint8Array([128|g.channel,g.parameter1,g.parameter2]));u.push(q);
b.push(g)}this.tracks.push(b);this.plainTracks.push(u)}}}])});}).call(this || window)
