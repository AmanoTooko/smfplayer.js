(function(){/*
 @logue/smfplayer v0.3.2 | imaya / GREE Inc. / Logue | license: MIT */
'use strict';(function(p,b){"object"===typeof exports&&"object"===typeof module?module.exports=b():"function"===typeof define&&define.amd?define("SMF",[],b):"object"===typeof exports?exports.SMF=b():p.SMF=b()})("undefined"!==typeof self?self:this,function(){return function(p){function b(a){if(l[a])return l[a].exports;var e=l[a]={i:a,l:!1,exports:{}};p[a].call(e.exports,e,e.exports,b);e.l=!0;return e.exports}var l={};b.m=p;b.c=l;b.d=function(a,e,f){b.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,
get:f})};b.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})};b.t=function(a,e){e&1&&(a=b(a));if(e&8||e&4&&"object"===typeof a&&a&&a.__esModule)return a;var f=Object.create(null);b.r(f);Object.defineProperty(f,"default",{enumerable:!0,value:a});if(e&2&&"string"!=typeof a)for(var n in a)b.d(f,n,function(f){return a[f]}.bind(null,n));return f};b.n=function(a){var e=a&&a.__esModule?
function(){return a["default"]}:function(){return a};b.d(e,"a",e);return e};b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.p="";return b(b.s=5)}([function(p,b,l){l.d(b,"a",function(){return e});l.d(b,"c",function(){return f});l.d(b,"b",function(){return n});class a{constructor(a,d,c){this.subtype=a;this.deltaTime=d;this.time=c}}class e extends a{constructor(a,d,c,f,b,n){super(a,d,c);this.channel=f;this.parameter1=b;this.parameter2=n}}class f extends a{constructor(a,d,c,f){super(a,
d,c);this.data=f}}class n extends a{constructor(a,d,c,f){super(a,d,c);this.data=f}}},function(p,b,l){b.a={version:"0.3.2",date:"2019-12-14T16:35:03.998Z"}},,,function(p,b,l){l.d(b,"a",function(){return a});class a{constructor(a,b={}){this.input=a;this.ip=b.index||0;this.length=b.length||a.length-this.ip;this.offset=this.ip;this.padding=void 0!==b.padding?b.padding:!0;this.bigEndian=void 0!==b.bigEndian?b.bigEndian:!1}parse(){const a=this.length+this.offset;for(this.chunkList=[];this.ip<a;)this.parseChunk()}parseChunk(){var a=
this.input;let b=this.ip;this.chunkList.push(new e(String.fromCharCode(a[b++],a[b++],a[b++],a[b++]),a=this.bigEndian?(a[b++]<<24|a[b++]<<16|a[b++]<<8|a[b++])>>>0:(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0,b));b+=a;this.padding&&1===(b-this.offset&1)&&b++;this.ip=b}getChunk(a){a=this.chunkList[a];return void 0===a?null:a}getNumberOfChunks(){return this.chunkList.length}}class e{constructor(a,b,e){this.type=a;this.size=b;this.offset=e}}},function(p,b,l){l.r(b);l.d(b,"default",function(){return n});
var a=l(0),e=l(1),f=l(4);class n{constructor(a,b={}){b.padding=!1;b.bigEndian=!0;this.input=a;this.ip=b.index||0;this.chunkIndex=0;this.riffParser_=new f.a(a,b);this.timeDivision=this.numberOfTracks=this.formatType=0;this.tracks=[];this.plainTracks=[];this.version=e.a.version;this.build=e.a.build}parse(){let a,b;this.riffParser_.parse();this.parseHeaderChunk();a=0;for(b=this.numberOfTracks;a<b;++a)this.parseTrackChunk()}parseHeaderChunk(){const a=this.riffParser_.getChunk(this.chunkIndex++),b=this.input;
let c=a.offset;if(!a||"MThd"!==a.type)throw Error("invalid header signature");this.formatType=b[c++]<<8|b[c++];this.numberOfTracks=b[c++]<<8|b[c++];this.timeDivision=b[c++]<<8|b[c++]}parseTrackChunk(){var b=this.riffParser_.getChunk(this.chunkIndex++);const d=this.input;let c=b.offset,e=0;var h=0;let f=0;var k=0;let l=-1,p=-1,m=k=0;var q=0;let n=h=0,g;const r=()=>{let a=0,b;do b=d[c++],a=a<<7|b&127;while(0!==(b&128));return a};if(!b||"MTrk"!==b.type)throw Error("invalid header signature");e=b.offset+
b.size;b=[];const t=[];for(;c<e;){h=r();m+=h;q=c;n=d[c++];f=n>>4&15;k=n&15;8>f?(f=l,k=p,n=l<<4|p,c--,q--):(l=f,p=k);const e=[,,,,,,,,"NoteOff","NoteOn","NoteAftertouch","ControlChange","ProgramChange","ChannelAftertouch","PitchBend"];switch(f){case 8:case 9:case 10:case 11:case 13:case 14:g=new a.a(e[f],h,m,k,d[c++],d[c++]);break;case 12:g=new a.a(e[f],h,m,k,d[c++]);break;case 15:switch(k){case 0:k=r();if(247!==d[c+k-1])throw Error("invalid SysEx event");g=new a.c("SystemExclusive",h,m,d.subarray(c,
(c+=k)-1));break;case 7:k=r();g=new a.c("SystemExclusive(F7)",h,m,d.subarray(c,c+=k));break;case 15:f=d[c++];k=r();switch(f){case 0:g=new a.b("SequenceNumber",h,m,[d[c++],d[c++]]);break;case 1:g=new a.b("TextEvent",h,m,[String.fromCharCode.apply(null,d.subarray(c,c+=k))]);break;case 2:g=new a.b("CopyrightNotice",h,m,[String.fromCharCode.apply(null,d.subarray(c,c+=k))]);break;case 3:g=new a.b("SequenceTrackName",h,m,[String.fromCharCode.apply(null,d.subarray(c,c+=k))]);break;case 4:g=new a.b("InstrumentName",
h,m,[String.fromCharCode.apply(null,d.subarray(c,c+=k))]);break;case 5:g=new a.b("Lyrics",h,m,[String.fromCharCode.apply(null,d.subarray(c,c+=k))]);break;case 6:g=new a.b("Marker",h,m,[String.fromCharCode.apply(null,d.subarray(c,c+=k))]);break;case 7:g=new a.b("CuePoint",h,m,[String.fromCharCode.apply(null,d.subarray(c,c+=k))]);break;case 32:g=new a.b("MidiChannelPrefix",h,m,[d[c++]]);break;case 47:g=new a.b("EndOfTrack",h,m,[]);break;case 81:g=new a.b("SetTempo",h,m,[d[c++]<<16|d[c++]<<8|d[c++]]);
break;case 84:g=new a.b("SmpteOffset",h,m,[d[c++],d[c++],d[c++],d[c++],d[c++]]);break;case 88:g=new a.b("TimeSignature",h,m,[d[c++],d[c++],d[c++],d[c++]]);break;case 89:g=new a.b("KeySignature",h,m,[d[c++],d[c++]]);break;case 127:g=new a.b("SequencerSpecific",h,m,[d.subarray(c,c+=k)]);break;default:g=new a.b("Unknown",h,m,[f,d.subarray(c,c+=k)])}break;default:console.warn("unknown message:",n.toString(16))}break;default:throw Error("invalid status");}h=c-q;q=d.subarray(q,q+h);q[0]=n;g instanceof a.a&&
"NoteOn"===g.subtype&&0===g.parameter2&&(g.subtype=e[8],q=new Uint8Array([128|g.channel,g.parameter1,g.parameter2]));t.push(q);b.push(g)}this.tracks.push(b);this.plainTracks.push(t)}}}])});}).call(this || window)
